<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Jan van der Laan" />
  <title>Introduction to working with Data Packages</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <style type="text/css">

html {
color: #1a1a1a;
background-color: #fdfdfd;
}
body {
margin: 0 auto;
max-width: 46em;
padding-left: 50px;
padding-right: 50px;
padding-top: 50px;
padding-bottom: 50px;
hyphens: auto;
overflow-wrap: break-word;
text-rendering: optimizeLegibility;
font-kerning: normal;
}
@media (max-width: 600px) {
body {
font-size: 0.9em;
padding: 12px;
}
h1 {
font-size: 1.8em;
}
}
@media print {
html {
background-color: white;
}
body {
background-color: transparent;
color: black;
font-size: 12pt;
}
p, h2, h3 {
orphans: 3;
widows: 3;
}
h2, h3, h4 {
page-break-after: avoid;
}
}
p {
margin: 1em 0;
}
a {
color: #1a1a1a;
}
a:visited {
color: #1a1a1a;
}
img {
max-width: 100%;
}
h1, h2, h3, h4, h5, h6 {
margin-top: 1.4em;
}
h5, h6 {
font-size: 1em;
font-style: italic;
}
h6 {
font-weight: normal;
}
ol, ul {
padding-left: 1.7em;
margin-top: 1em;
}
li > ol, li > ul {
margin-top: 0;
}
blockquote {
margin: 1em 0 1em 1.7em;
padding-left: 1em;
border-left: 2px solid #e6e6e6;
color: #606060;
}
code {
font-family: Menlo, Monaco, Consolas, 'Lucida Console', monospace;
font-size: 85%;
margin: 0;
hyphens: manual;
}
pre {
margin: 1em 0;
overflow: auto;
}
pre code {
padding: 0;
overflow: visible;
overflow-wrap: normal;
}
.sourceCode {

overflow: visible;
}
hr {
background-color: #1a1a1a;
border: none;
height: 1px;
margin: 1em 0;
}
table {
margin: 1em 0;
border-collapse: collapse;
width: 100%;
overflow-x: auto;
display: block;
font-variant-numeric: lining-nums tabular-nums;
}
table caption {
margin-bottom: 0.75em;
}
tbody {
margin-top: 0.5em;
border-top: 1px solid #1a1a1a;
border-bottom: 1px solid #1a1a1a;
}
th {
border-top: 1px solid #1a1a1a;
padding: 0.25em 0.5em 0.25em 0.5em;
}
td {
padding: 0.125em 0.5em 0.25em 0.5em;
}
header {
margin-bottom: 4em;
text-align: center;
}
#TOC li {
list-style: none;
}
#TOC ul {
padding-left: 1.3em;
}
#TOC > ul {
padding-left: 0;
}
#TOC a:not(:hover) {
text-decoration: none;
}
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

th, td {
vertical-align: top;
}
.incomplete {
background: #EFBDBE;
font-size: 80%;
}
.complete {
background: #BEEFBD;
font-size: 80%;
}
.partial {
background: #EFEEBD;
font-size: 80%;
}
.irrelevant {
background: #EEEEEE;
font-size: 80%;
}
tr.sub td:first-of-type {
padding-left: 2em;
}
p {
text-align: justify;
}
header p {
text-align: center;
}
pre {
background: #eeeeee;
padding: 0.5rem;
}
pre code {
color: black;
background: inherit;
padding: 0;
}
code {
color: black;
background: #eeeeee;
padding: 0.2rem;
}
</style>
</head>
<body>
<header id="title-block-header">
<h1 class="title">Introduction to working with Data Packages</h1>
<p class="author">Jan van der Laan</p>
</header>
<!--
%\VignetteEngine{simplermarkdown::mdweave_to_html}
%\VignetteIndexEntry{Introduction to datapackage}
-->
<p>A <a href="https://datapackage.org">Data Package</a> is collection of
files and consists of both data, which can be any type of information
such as images and CSV files, and meta data. These files are usually
stored in one directory (possibly with sub directories) although links
to external data are possible. Meta data is data about data and consists
of the information needed by software programmes to use the data and
information needed by users of the data such as descriptions, names of
authors, licences etc. The meta data is stored in a file in the
directory that is usually called <code>datapackage.json</code>. The
information in this file is what below will be called the Data Package.
As mentioned, it contains both information on the data package itself
(title, description) and information on a number of Data Resources. The
Data Resources describe the data files in the data package and also
contains information like a title, description, but also information
needed by software to use the data such as the path to the data
(location of the data), and technical information such as how the data
is stored. This information makes it easier to use the data. Below we
will show how we can use the information in a Data Package to easily
read in the data and work with the data and we will show how we can
create a Data Package for our own data.</p>
<h2 id="overview-of-terminology">Overview of terminology</h2>
<p>Below an overview of some of the terminology associated with Data
Packages.</p>
<p><strong><a href="https://datapackage.org/standard/data-package/">Data
Package</a></strong></p>
<ul>
<li>Contains one or more Data Resources.</li>
<li>Has a number of properties like <code>title</code>,
<code>name</code> and <code>description</code>.</li>
</ul>
<p><strong><a href="https://datapackage.org/standard/data-resource/">Data
Resource</a></strong></p>
<ul>
<li>Contains data either as inline data in a <code>data</code> property
or external data pointed to by a <code>path</code> property.</li>
<li>Has a number of properties, like
<code>title,</code>name<code>,</code>encoding`, â€¦</li>
</ul>
<p><strong><a href="https://datapackage.org/standard/data-resource/#tabular">Tabular
Data Resource</a></strong></p>
<ul>
<li>Is a Data Resource with an additional set of properties and
constraints.</li>
<li>Has a Table Schema.</li>
</ul>
<p><strong><a href="https://datapackage.org/standard/table-schema/">Table
Schema</a></strong></p>
<ul>
<li>Describes a tabular data set (a data set with rows an columns; as
usually stored in a <code>data.frame</code> in R).</li>
<li>Has one or more Field Descriptors.</li>
</ul>
<p><strong><a href="https://datapackage.org/standard/table-schema/#field">Field
Descriptor</a></strong></p>
<ul>
<li>Describes a Field (a column) in a tabular data set.</li>
<li>Has number of properties like, <code>name</code> and
<code>type</code>.</li>
</ul>
<h2 id="tldr">tl;dr</h2>
<p><code>open_datapackage()</code> reads the meta data from the
<code>datapackage.json</code>. From the output below you can see that
the data package has three data resources.</p>
<div class="sourceCode" id="tldropen"><pre class="sourceCode R"><code class="sourceCode r"><span id="tldropen-1"><a href="#tldropen-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(datapackage, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="tldropen-2"><a href="#tldropen-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dir <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;examples/employ&quot;</span>, <span class="at">package =</span> <span class="st">&quot;datapackage&quot;</span>)</span>
<span id="tldropen-3"><a href="#tldropen-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dp <span class="ot">&lt;-</span> <span class="fu">open_datapackage</span>(dir)</span>
<span id="tldropen-4"><a href="#tldropen-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dp</span>
<span id="tldropen-5"><a href="#tldropen-5" aria-hidden="true" tabindex="-1"></a>[example] Example data set <span class="cf">for</span> the datapackage package</span>
<span id="tldropen-6"><a href="#tldropen-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="tldropen-7"><a href="#tldropen-7" aria-hidden="true" tabindex="-1"></a>This is an example data set to show how the datapackage package can be used to import data into R.</span>
<span id="tldropen-8"><a href="#tldropen-8" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="tldropen-9"><a href="#tldropen-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="tldropen-10"><a href="#tldropen-10" aria-hidden="true" tabindex="-1"></a>Location<span class="sc">:</span> <span class="er">&lt;/</span>tmp<span class="sc">/</span>RtmpmhcQwK<span class="sc">/</span>Rinst71da17db59e<span class="sc">/</span>datapackage<span class="sc">/</span>examples<span class="sc">/</span>employ<span class="sc">&gt;</span></span>
<span id="tldropen-11"><a href="#tldropen-11" aria-hidden="true" tabindex="-1"></a>Resources<span class="sc">:</span></span>
<span id="tldropen-12"><a href="#tldropen-12" aria-hidden="true" tabindex="-1"></a>[employment] Employment status</span>
<span id="tldropen-13"><a href="#tldropen-13" aria-hidden="true" tabindex="-1"></a>[codelist<span class="sc">-</span>gender] Code list <span class="cf">for</span> gender of person</span>
<span id="tldropen-14"><a href="#tldropen-14" aria-hidden="true" tabindex="-1"></a>[codelist<span class="sc">-</span>employ] Code list <span class="cf">for</span> employment status</span></code></pre></div>
<p>To read the data beloning to one of the data resources:</p>
<div class="sourceCode" id="tldrgetdata"><pre class="sourceCode R"><code class="sourceCode r"><span id="tldrgetdata-1"><a href="#tldrgetdata-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> dp <span class="sc">|&gt;</span> <span class="fu">dp_resource</span>(<span class="st">&quot;employment&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">dp_get_data</span>()</span>
<span id="tldrgetdata-2"><a href="#tldrgetdata-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="tldrgetdata-3"><a href="#tldrgetdata-3" aria-hidden="true" tabindex="-1"></a>          id        dob gender employ  income haspartner</span>
<span id="tldrgetdata-4"><a href="#tldrgetdata-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-5"><a href="#tldrgetdata-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-6"><a href="#tldrgetdata-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-7"><a href="#tldrgetdata-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-8"><a href="#tldrgetdata-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="tldrgetdata-9"><a href="#tldrgetdata-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-10"><a href="#tldrgetdata-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-11"><a href="#tldrgetdata-11" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>      M      E  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-12"><a href="#tldrgetdata-12" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-13"><a href="#tldrgetdata-13" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-14"><a href="#tldrgetdata-14" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>      F      E <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-15"><a href="#tldrgetdata-15" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>      F      E <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="tldrgetdata-16"><a href="#tldrgetdata-16" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>      M      E  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="tldrgetdata-17"><a href="#tldrgetdata-17" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>      M      E <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-18"><a href="#tldrgetdata-18" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>      M      E <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-19"><a href="#tldrgetdata-19" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-20"><a href="#tldrgetdata-20" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>      M      E  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="tldrgetdata-21"><a href="#tldrgetdata-21" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>      F      E <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-22"><a href="#tldrgetdata-22" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>      F      E  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="tldrgetdata-23"><a href="#tldrgetdata-23" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span>      <span class="sc">-</span>      N      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>When the name of the data resource is known, the data can also be
read directly from the data package without explicitly opening the Data
Package:</p>
<div class="sourceCode" id="tldrload"><pre class="sourceCode R"><code class="sourceCode r"><span id="tldrload-1"><a href="#tldrload-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_load_from_datapackage</span>(dir, <span class="st">&quot;employment&quot;</span>)</span>
<span id="tldrload-2"><a href="#tldrload-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="tldrload-3"><a href="#tldrload-3" aria-hidden="true" tabindex="-1"></a>          id        dob gender employ  income haspartner</span>
<span id="tldrload-4"><a href="#tldrload-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-5"><a href="#tldrload-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-6"><a href="#tldrload-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-7"><a href="#tldrload-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-8"><a href="#tldrload-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="tldrload-9"><a href="#tldrload-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-10"><a href="#tldrload-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-11"><a href="#tldrload-11" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>      M      E  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-12"><a href="#tldrload-12" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-13"><a href="#tldrload-13" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-14"><a href="#tldrload-14" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>      F      E <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-15"><a href="#tldrload-15" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>      F      E <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="tldrload-16"><a href="#tldrload-16" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>      M      E  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="tldrload-17"><a href="#tldrload-17" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>      M      E <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-18"><a href="#tldrload-18" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>      M      E <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-19"><a href="#tldrload-19" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-20"><a href="#tldrload-20" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>      M      E  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="tldrload-21"><a href="#tldrload-21" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>      F      E <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-22"><a href="#tldrload-22" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>      F      E  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="tldrload-23"><a href="#tldrload-23" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span>      <span class="sc">-</span>      N      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>With the <code>convert_categories</code> argument categorical
variables can be converted to factor:</p>
<div class="sourceCode" id="tldrloadfactor"><pre class="sourceCode R"><code class="sourceCode r"><span id="tldrloadfactor-1"><a href="#tldrloadfactor-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_load_from_datapackage</span>(dir, <span class="st">&quot;employment&quot;</span>, </span>
<span id="tldrloadfactor-2"><a href="#tldrloadfactor-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">convert_categories =</span> <span class="st">&quot;to_factor&quot;</span>)</span>
<span id="tldrloadfactor-3"><a href="#tldrloadfactor-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="tldrloadfactor-4"><a href="#tldrloadfactor-4" aria-hidden="true" tabindex="-1"></a>          id        dob  gender                 employ  income haspartner</span>
<span id="tldrloadfactor-5"><a href="#tldrloadfactor-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>    Male               Employed <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-6"><a href="#tldrloadfactor-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>   Other             Unemployed      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-7"><a href="#tldrloadfactor-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>  Female               Employed  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-8"><a href="#tldrloadfactor-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>    Male               Employed  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-9"><a href="#tldrloadfactor-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>  Female               Employed  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadfactor-10"><a href="#tldrloadfactor-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>  Female               Employed <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-11"><a href="#tldrloadfactor-11" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>    Male Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-12"><a href="#tldrloadfactor-12" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>    Male               Employed  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-13"><a href="#tldrloadfactor-13" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>  Female Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-14"><a href="#tldrloadfactor-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>  Female Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-15"><a href="#tldrloadfactor-15" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>  Female               Employed <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-16"><a href="#tldrloadfactor-16" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>  Female               Employed <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadfactor-17"><a href="#tldrloadfactor-17" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>    Male               Employed  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadfactor-18"><a href="#tldrloadfactor-18" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>    Male               Employed <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-19"><a href="#tldrloadfactor-19" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>    Male               Employed <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-20"><a href="#tldrloadfactor-20" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>    Male Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-21"><a href="#tldrloadfactor-21" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>    Male               Employed  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadfactor-22"><a href="#tldrloadfactor-22" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>  Female               Employed <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-23"><a href="#tldrloadfactor-23" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>  Female               Employed  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadfactor-24"><a href="#tldrloadfactor-24" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span> Unknown Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>Or, they can be converted to the <a href="https://cran.r-project.org/package=codelist"><code>code</code>
class from the <code>codelist</code> package</a>. This will preserve
both the codes and the labels:</p>
<div class="sourceCode" id="tldrloadcode"><pre class="sourceCode R"><code class="sourceCode r"><span id="tldrloadcode-1"><a href="#tldrloadcode-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(codelist)</span>
<span id="tldrloadcode-2"><a href="#tldrloadcode-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_load_from_datapackage</span>(dir, <span class="st">&quot;employment&quot;</span>, </span>
<span id="tldrloadcode-3"><a href="#tldrloadcode-3" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">convert_categories =</span> <span class="st">&quot;to_code&quot;</span>)</span>
<span id="tldrloadcode-4"><a href="#tldrloadcode-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="tldrloadcode-5"><a href="#tldrloadcode-5" aria-hidden="true" tabindex="-1"></a>          id        dob     gender      employ  income haspartner</span>
<span id="tldrloadcode-6"><a href="#tldrloadcode-6" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span> M[Male]    E[Employed] <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-7"><a href="#tldrloadcode-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span> X[Other]   U[Unemploâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-8"><a href="#tldrloadcode-8" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span> F[Female]  E[Employed]  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-9"><a href="#tldrloadcode-9" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span> M[Male]    E[Employed]  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-10"><a href="#tldrloadcode-10" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span> F[Female]  E[Employed]  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadcode-11"><a href="#tldrloadcode-11" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span> F[Female]  E[Employed] <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-12"><a href="#tldrloadcode-12" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span> M[Male]    N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-13"><a href="#tldrloadcode-13" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span> M[Male]    E[Employed]  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-14"><a href="#tldrloadcode-14" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span> F[Female]  N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-15"><a href="#tldrloadcode-15" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span> F[Female]  N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-16"><a href="#tldrloadcode-16" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span> F[Female]  E[Employed] <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-17"><a href="#tldrloadcode-17" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span> F[Female]  E[Employed] <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadcode-18"><a href="#tldrloadcode-18" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span> M[Male]    E[Employed]  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadcode-19"><a href="#tldrloadcode-19" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span> M[Male]    E[Employed] <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-20"><a href="#tldrloadcode-20" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span> M[Male]    E[Employed] <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-21"><a href="#tldrloadcode-21" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span> M[Male]    N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-22"><a href="#tldrloadcode-22" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span> M[Male]    E[Employed]  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="tldrloadcode-23"><a href="#tldrloadcode-23" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span> F[Female]  E[Employed] <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-24"><a href="#tldrloadcode-24" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span> F[Female]  E[Employed]  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="tldrloadcode-25"><a href="#tldrloadcode-25" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span> <span class="sc">-</span>[Unknown] N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>When the data resource name is omitted from
<code>dp_load_from_datapackage()</code> either the data resource with
same name as the data package or the first data resource is opened.</p>
<h2 id="getting-information-from-a-data-package">Getting information
from a Data Package</h2>
<p>Below we open an example Data Package that comes with the
package:</p>
<div class="sourceCode" id="g1"><pre class="sourceCode R"><code class="sourceCode r"><span id="g1-1"><a href="#g1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(datapackage, <span class="at">warn.conflicts =</span> <span class="cn">FALSE</span>)</span>
<span id="g1-2"><a href="#g1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dir <span class="ot">&lt;-</span> <span class="fu">system.file</span>(<span class="st">&quot;examples/employ&quot;</span>, <span class="at">package =</span> <span class="st">&quot;datapackage&quot;</span>)</span>
<span id="g1-3"><a href="#g1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dp <span class="ot">&lt;-</span> <span class="fu">open_datapackage</span>(dir)</span>
<span id="g1-4"><a href="#g1-4" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dp</span>
<span id="g1-5"><a href="#g1-5" aria-hidden="true" tabindex="-1"></a>[example] Example data set <span class="cf">for</span> the datapackage package</span>
<span id="g1-6"><a href="#g1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="g1-7"><a href="#g1-7" aria-hidden="true" tabindex="-1"></a>This is an example data set to show how the datapackage package can be used to import data into R.</span>
<span id="g1-8"><a href="#g1-8" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="g1-9"><a href="#g1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="g1-10"><a href="#g1-10" aria-hidden="true" tabindex="-1"></a>Location<span class="sc">:</span> <span class="er">&lt;/</span>tmp<span class="sc">/</span>RtmpmhcQwK<span class="sc">/</span>Rinst71da17db59e<span class="sc">/</span>datapackage<span class="sc">/</span>examples<span class="sc">/</span>employ<span class="sc">&gt;</span></span>
<span id="g1-11"><a href="#g1-11" aria-hidden="true" tabindex="-1"></a>Resources<span class="sc">:</span></span>
<span id="g1-12"><a href="#g1-12" aria-hidden="true" tabindex="-1"></a>[employment] Employment status</span>
<span id="g1-13"><a href="#g1-13" aria-hidden="true" tabindex="-1"></a>[codelist<span class="sc">-</span>gender] Code list <span class="cf">for</span> gender of person</span>
<span id="g1-14"><a href="#g1-14" aria-hidden="true" tabindex="-1"></a>[codelist<span class="sc">-</span>employ] Code list <span class="cf">for</span> employment status</span></code></pre></div>
<p>The print statement shows the name of the package,
<code>example</code>, the title, the first paragraph of the description,
the location of the Data Package and the Data Resources in the package.
In this case there are three Data Resources:</p>
<div class="sourceCode" id="g2"><pre class="sourceCode R"><code class="sourceCode r"><span id="g2-1"><a href="#g2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_nresources</span>(dp)</span>
<span id="g2-2"><a href="#g2-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="dv">3</span></span></code></pre></div>
<p>The names are</p>
<div class="sourceCode" id="g3"><pre class="sourceCode R"><code class="sourceCode r"><span id="g3-1"><a href="#g3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_resource_names</span>(dp)</span>
<span id="g3-2"><a href="#g3-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;employment&quot;</span>      <span class="st">&quot;codelist-gender&quot;</span> <span class="st">&quot;codelist-employ&quot;</span></span></code></pre></div>
<p>Using the <code>resource()</code> method on the Data Package can
obtain the Data Resource</p>
<div class="sourceCode" id="g4"><pre class="sourceCode R"><code class="sourceCode r"><span id="g4-1"><a href="#g4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> employ <span class="ot">&lt;-</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;employment&quot;</span>)</span>
<span id="g4-2"><a href="#g4-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> employ</span>
<span id="g4-3"><a href="#g4-3" aria-hidden="true" tabindex="-1"></a>[employment] Employment status</span>
<span id="g4-4"><a href="#g4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="g4-5"><a href="#g4-5" aria-hidden="true" tabindex="-1"></a>Employment status, income and background properties of sample of persons.</span>
<span id="g4-6"><a href="#g4-6" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="g4-7"><a href="#g4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="g4-8"><a href="#g4-8" aria-hidden="true" tabindex="-1"></a>Selected properties<span class="sc">:</span></span>
<span id="g4-9"><a href="#g4-9" aria-hidden="true" tabindex="-1"></a>path     <span class="sc">:</span><span class="st">&quot;employ.csv&quot;</span></span>
<span id="g4-10"><a href="#g4-10" aria-hidden="true" tabindex="-1"></a>format   <span class="sc">:</span><span class="st">&quot;csv&quot;</span></span>
<span id="g4-11"><a href="#g4-11" aria-hidden="true" tabindex="-1"></a>mediatype<span class="sc">:</span><span class="st">&quot;text/csv&quot;</span></span>
<span id="g4-12"><a href="#g4-12" aria-hidden="true" tabindex="-1"></a>encoding <span class="sc">:</span><span class="st">&quot;utf-8&quot;</span></span>
<span id="g4-13"><a href="#g4-13" aria-hidden="true" tabindex="-1"></a>dialect  <span class="sc">:</span>List of <span class="dv">3</span></span>
<span id="g4-14"><a href="#g4-14" aria-hidden="true" tabindex="-1"></a>schema   <span class="sc">:</span>Table Schema [<span class="dv">6</span>] <span class="st">&quot;id&quot;</span> <span class="st">&quot;dob&quot;</span> <span class="st">&quot;gender&quot;</span> <span class="st">&quot;employ&quot;</span> <span class="st">&quot;income&quot;</span> <span class="st">&quot;haspartner&quot;</span></span></code></pre></div>
<p>The <code>print</code> statement again shows the name, title and
description. It also shows that the data is in a CSV-file anmes
<code>employ.csv</code>. Standard the <code>print</code> shows only a
few properties of the Data Resource. To show all properties:</p>
<div class="sourceCode" id="g5"><pre class="sourceCode R"><code class="sourceCode r"><span id="g5-1"><a href="#g5-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">print</span>(employ, <span class="at">properties =</span> <span class="cn">NA</span>)</span>
<span id="g5-2"><a href="#g5-2" aria-hidden="true" tabindex="-1"></a>[employment] Employment status</span>
<span id="g5-3"><a href="#g5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="g5-4"><a href="#g5-4" aria-hidden="true" tabindex="-1"></a>Employment status, income and background properties of sample of persons.</span>
<span id="g5-5"><a href="#g5-5" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="g5-6"><a href="#g5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="g5-7"><a href="#g5-7" aria-hidden="true" tabindex="-1"></a>Selected properties<span class="sc">:</span></span>
<span id="g5-8"><a href="#g5-8" aria-hidden="true" tabindex="-1"></a>path     <span class="sc">:</span><span class="st">&quot;employ.csv&quot;</span></span>
<span id="g5-9"><a href="#g5-9" aria-hidden="true" tabindex="-1"></a>format   <span class="sc">:</span><span class="st">&quot;csv&quot;</span></span>
<span id="g5-10"><a href="#g5-10" aria-hidden="true" tabindex="-1"></a>mediatype<span class="sc">:</span><span class="st">&quot;text/csv&quot;</span></span>
<span id="g5-11"><a href="#g5-11" aria-hidden="true" tabindex="-1"></a>encoding <span class="sc">:</span><span class="st">&quot;utf-8&quot;</span></span>
<span id="g5-12"><a href="#g5-12" aria-hidden="true" tabindex="-1"></a>dialect  <span class="sc">:</span>List of <span class="dv">3</span></span>
<span id="g5-13"><a href="#g5-13" aria-hidden="true" tabindex="-1"></a>schema   <span class="sc">:</span>Table Schema [<span class="dv">6</span>] <span class="st">&quot;id&quot;</span> <span class="st">&quot;dob&quot;</span> <span class="st">&quot;gender&quot;</span> <span class="st">&quot;employ&quot;</span> <span class="st">&quot;income&quot;</span> <span class="st">&quot;haspartner&quot;</span></span></code></pre></div>
<p>Using this information it should be possible to open the dataset. The
data can be opened in R using the <code>dp_get_data()</code> method.
Based on the information in the Data Resource this function will try to
open the dataset using the correct functions in R (in this case
<code>read.csv()</code>):</p>
<div class="sourceCode" id="g6"><pre class="sourceCode R"><code class="sourceCode r"><span id="g6-1"><a href="#g6-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_get_data</span>(employ)</span>
<span id="g6-2"><a href="#g6-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(dta)</span>
<span id="g6-3"><a href="#g6-3" aria-hidden="true" tabindex="-1"></a>         id        dob gender employ  income haspartner</span>
<span id="g6-4"><a href="#g6-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="g6-5"><a href="#g6-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="g6-6"><a href="#g6-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="g6-7"><a href="#g6-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="g6-8"><a href="#g6-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="g6-9"><a href="#g6-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span></code></pre></div>
<p>It is also possible to import the data directly from the Data Package
object by specifying the resource for which the data needs to be
imported.</p>
<div class="sourceCode" id="g7"><pre class="sourceCode R"><code class="sourceCode r"><span id="g7-1"><a href="#g7-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_get_data</span>(dp, <span class="st">&quot;employment&quot;</span>)</span></code></pre></div>
<p>The <code>dp_get_data()</code> method only supports a limited set of
data formats. It is possible to also provide a custum function to read
the data using the <code>reader</code> argument of
<code>dp_get_data()</code>. However, it is also possible to import the
data â€˜manuallyâ€™ using the information in the Data Package. The path of
the file in a Data Resource can be obtained using the
<code>dp_path()</code> method:</p>
<div class="sourceCode" id="g8"><pre class="sourceCode R"><code class="sourceCode r"><span id="g8-1"><a href="#g8-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_path</span>(employ)</span>
<span id="g8-2"><a href="#g8-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;employ.csv&quot;</span></span></code></pre></div>
<p>By default this will return the path as defined in the Data Package.
This either a path relative to the directory in which the Data Package
is located or a URL. To open a file inside the Data Package one also
needs the location of the Data Package. Using the
<code>full_path = TRUE</code> argument, <code>dp_path()</code> will
return the full path to the file:</p>
<div class="sourceCode" id="g10"><pre class="sourceCode R"><code class="sourceCode r"><span id="g10-1"><a href="#g10-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> fn <span class="ot">&lt;-</span> <span class="fu">dp_path</span>(employ, <span class="at">full_path =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<p>This path can be used to open the file manually:</p>
<div class="sourceCode" id="g11"><pre class="sourceCode R"><code class="sourceCode r"><span id="g11-1"><a href="#g11-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(fn)</span>
<span id="g11-2"><a href="#g11-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(dta)</span>
<span id="g11-3"><a href="#g11-3" aria-hidden="true" tabindex="-1"></a>         id        dob gender employ   income haspartner</span>
<span id="g11-4"><a href="#g11-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E â‚¬<span class="dv">2</span> <span class="dv">691</span>,<span class="dv">8</span>          N</span>
<span id="g11-5"><a href="#g11-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U     <span class="sc">&lt;</span><span class="cn">NA</span><span class="sc">&gt;</span>          N</span>
<span id="g11-6"><a href="#g11-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  â‚¬<span class="dv">533</span>,<span class="dv">65</span>          N</span>
<span id="g11-7"><a href="#g11-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  â‚¬<span class="dv">790</span>,<span class="dv">13</span>          N</span>
<span id="g11-8"><a href="#g11-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  â‚¬<span class="dv">716</span>,<span class="dv">79</span>          Y</span>
<span id="g11-9"><a href="#g11-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E â‚¬<span class="dv">1</span> <span class="dv">651</span>,<span class="dv">6</span>          N</span></code></pre></div>
<p>First, note that we had to â€˜knowâ€™ that we had to use
<code>read.csv2</code> since the file uses the â€˜<code>;</code>â€™ as field
separator. Information like this is stored in the â€˜dialectâ€™ property of
a data resource:</p>
<div class="sourceCode" id="dialect"><pre class="sourceCode R"><code class="sourceCode r"><span id="dialect-1"><a href="#dialect-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_property</span>(employ, <span class="st">&quot;dialect&quot;</span>)</span>
<span id="dialect-2"><a href="#dialect-2" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>decimalChar</span>
<span id="dialect-3"><a href="#dialect-3" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;,&quot;</span></span>
<span id="dialect-4"><a href="#dialect-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="dialect-5"><a href="#dialect-5" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>delimiter</span>
<span id="dialect-6"><a href="#dialect-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;;&quot;</span></span>
<span id="dialect-7"><a href="#dialect-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="dialect-8"><a href="#dialect-8" aria-hidden="true" tabindex="-1"></a><span class="sc">$</span>nullSequence</span>
<span id="dialect-9"><a href="#dialect-9" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;NA&quot;</span></span></code></pre></div>
<p>Second, note that the field â€˜incomeâ€™ is not converted to numeric as
this field contains euro symbols and used a space as thousands
separator. Information like this is stored in the field descriptor:</p>
<div class="sourceCode" id="income"><pre class="sourceCode R"><code class="sourceCode r"><span id="income-1"><a href="#income-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_field</span>(employ, <span class="st">&quot;income&quot;</span>)</span>
<span id="income-2"><a href="#income-2" aria-hidden="true" tabindex="-1"></a>Field Descriptor<span class="sc">:</span></span>
<span id="income-3"><a href="#income-3" aria-hidden="true" tabindex="-1"></a>name       <span class="sc">:</span><span class="st">&quot;income&quot;</span></span>
<span id="income-4"><a href="#income-4" aria-hidden="true" tabindex="-1"></a>title      <span class="sc">:</span><span class="st">&quot;Net income&quot;</span></span>
<span id="income-5"><a href="#income-5" aria-hidden="true" tabindex="-1"></a>type       <span class="sc">:</span><span class="st">&quot;number&quot;</span></span>
<span id="income-6"><a href="#income-6" aria-hidden="true" tabindex="-1"></a>bareNumber <span class="sc">:</span><span class="cn">FALSE</span></span>
<span id="income-7"><a href="#income-7" aria-hidden="true" tabindex="-1"></a>decimalChar<span class="sc">:</span><span class="st">&quot;,&quot;</span></span>
<span id="income-8"><a href="#income-8" aria-hidden="true" tabindex="-1"></a>groupChar  <span class="sc">:</span><span class="st">&quot; &quot;</span></span></code></pre></div>
<p><code>dp_get_data()</code> uses the information from the field
descriptors and dialect to automatically convert variables as much a
possible to their most fitting R types. This is done using the
<code>dp_apply_schema()</code> function:</p>
<div class="sourceCode" id="dpapplyschema"><pre class="sourceCode R"><code class="sourceCode r"><span id="dpapplyschema-1"><a href="#dpapplyschema-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_apply_schema</span>(dta, employ)</span>
<span id="dpapplyschema-2"><a href="#dpapplyschema-2" aria-hidden="true" tabindex="-1"></a>          id        dob gender employ  income haspartner</span>
<span id="dpapplyschema-3"><a href="#dpapplyschema-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-4"><a href="#dpapplyschema-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-5"><a href="#dpapplyschema-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-6"><a href="#dpapplyschema-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-7"><a href="#dpapplyschema-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="dpapplyschema-8"><a href="#dpapplyschema-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-9"><a href="#dpapplyschema-9" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-10"><a href="#dpapplyschema-10" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>      M      E  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-11"><a href="#dpapplyschema-11" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-12"><a href="#dpapplyschema-12" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-13"><a href="#dpapplyschema-13" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>      F      E <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-14"><a href="#dpapplyschema-14" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>      F      E <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="dpapplyschema-15"><a href="#dpapplyschema-15" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>      M      E  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="dpapplyschema-16"><a href="#dpapplyschema-16" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>      M      E <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-17"><a href="#dpapplyschema-17" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>      M      E <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-18"><a href="#dpapplyschema-18" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-19"><a href="#dpapplyschema-19" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>      M      E  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="dpapplyschema-20"><a href="#dpapplyschema-20" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>      F      E <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-21"><a href="#dpapplyschema-21" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>      F      E  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="dpapplyschema-22"><a href="#dpapplyschema-22" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span>      <span class="sc">-</span>      N      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>Finally, note that the <code>path</code> property of a Data Resource
can be a vector of paths in case a single data set is stored in a set of
files. It is assumed then that the files have the same format.
Therefore, <code>rbind</code> should work on these files.</p>
<p>Below is an alternative way of importing the data belonging to a Data
Resource. Here we use the pipe operator to chain the various commands to
import the data set.</p>
<div class="sourceCode" id="g12"><pre class="sourceCode R"><code class="sourceCode r"><span id="g12-1"><a href="#g12-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;employment&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">dp_get_data</span>()</span>
<span id="g12-2"><a href="#g12-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">head</span>(dta)</span>
<span id="g12-3"><a href="#g12-3" aria-hidden="true" tabindex="-1"></a>         id        dob gender employ  income haspartner</span>
<span id="g12-4"><a href="#g12-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="g12-5"><a href="#g12-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="g12-6"><a href="#g12-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="g12-7"><a href="#g12-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span> <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="g12-8"><a href="#g12-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span> <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="g12-9"><a href="#g12-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>  <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span></code></pre></div>
<h2 id="reading-properties-from-data-packages-and-data-resources">Reading
properties from Data Packages and Data Resources</h2>
<p>For many of the standard fields of a Data Packages, methods are
defined to obtain the values of these fields:</p>
<div class="sourceCode" id="r1"><pre class="sourceCode R"><code class="sourceCode r"><span id="r1-1"><a href="#r1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_name</span>(dp)</span>
<span id="r1-2"><a href="#r1-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;example&quot;</span></span>
<span id="r1-3"><a href="#r1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_description</span>(dp)</span>
<span id="r1-4"><a href="#r1-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;This is an example data set to show how the datapackage package can be used to import data into R.</span><span class="sc">\n\n</span><span class="st">Its main data resource is the `employ` resource which contains fictional data about individuals. The other data resources are supporting data sets.&quot;</span></span>
<span id="r1-5"><a href="#r1-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_description</span>(dp, <span class="at">first_paragraph =</span> <span class="cn">TRUE</span>)</span>
<span id="r1-6"><a href="#r1-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;This is an example data set to show how the datapackage package can be used to import data into R.&quot;</span></span>
<span id="r1-7"><a href="#r1-7" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_title</span>(dp)</span>
<span id="r1-8"><a href="#r1-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Example data set for the datapackage package&quot;</span></span></code></pre></div>
<p>The same holds for Data Resources:</p>
<div class="sourceCode" id="r2"><pre class="sourceCode R"><code class="sourceCode r"><span id="r2-1"><a href="#r2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_title</span>(employ)</span>
<span id="r2-2"><a href="#r2-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Employment status&quot;</span></span>
<span id="r2-3"><a href="#r2-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;codelist-employ&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">dp_title</span>()</span>
<span id="r2-4"><a href="#r2-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;Code list for employment status&quot;</span></span></code></pre></div>
<p>For <code>datapackage</code> objects there are currently defined the
following methods: (this list can be obtained using
<code>?PropertiesDatapackage</code>)</p>
<ul>
<li><code>dp_contributors()</code></li>
<li><code>dp_created()</code></li>
<li><code>dp_description()</code></li>
<li><code>dp_id()</code></li>
<li><code>dp_keywords()</code></li>
<li><code>dp_name()</code></li>
<li><code>dp_title()</code></li>
</ul>
<p>For <code>dataresource</code> objects there are currently defined the
following methods (this list can be obtained using
<code>?PropertiesDataresource</code>)</p>
<ul>
<li><code>dp_bytes()</code></li>
<li><code>dp_encoding()</code></li>
<li><code>dp_description()</code></li>
<li><code>dp_format()</code></li>
<li><code>dp_hash()</code></li>
<li><code>dp_name()</code></li>
<li><code>dp_mediatype()</code></li>
<li><code>dp_path()</code></li>
<li><code>dp_schema()</code></li>
<li><code>dp_title()</code></li>
</ul>
<p>The <code>dp_path()</code> method has a <code>full_path</code>
argument that, when used, returns the full path to the Data Resources
data and not just the path relative to the Data Package. The full path
is needed when one wants to use the path to read the data.</p>
<div class="sourceCode" id="r3"><pre class="sourceCode R"><code class="sourceCode r"><span id="r3-1"><a href="#r3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_path</span>(employ)</span>
<span id="r3-2"><a href="#r3-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;employ.csv&quot;</span></span>
<span id="r3-3"><a href="#r3-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_path</span>(employ, <span class="at">full_path =</span> <span class="cn">TRUE</span>)</span>
<span id="r3-4"><a href="#r3-4" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;/tmp/RtmpmhcQwK/Rinst71da17db59e/datapackage/examples/employ/employ.csv&quot;</span></span></code></pre></div>
<p>It is also possible to get other properties than the ones explicitly
mentioned above using the <code>dp_property()</code> method:</p>
<div class="sourceCode" id="r4"><pre class="sourceCode R"><code class="sourceCode r"><span id="r4-1"><a href="#r4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_property</span>(employ, <span class="st">&quot;encoding&quot;</span>)</span>
<span id="r4-2"><a href="#r4-2" aria-hidden="true" tabindex="-1"></a>[<span class="dv">1</span>] <span class="st">&quot;utf-8&quot;</span></span></code></pre></div>
<h2 id="working-with-categories">Working with categories</h2>
<p>It is possible for fields to have a list of <a href="https://datapackage.org/standard/table-schema/#categories">categories
associated with them</a>. Categories are usually stored inside the Field
Descriptor. However, the <code>datapackage</code> package also supports
lists of categories stored in a seperate Data Resource (this is not part
of the datapackage standard).</p>
<p>In the example resource, there is are â€˜genderâ€™ and â€˜employâ€™ that have
categories associated with them:</p>
<div class="sourceCode" id="c1"><pre class="sourceCode R"><code class="sourceCode r"><span id="c1-1"><a href="#c1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;employment&quot;</span>) <span class="sc">|&gt;</span> <span class="fu">dp_get_data</span>()</span>
<span id="c1-2"><a href="#c1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="c1-3"><a href="#c1-3" aria-hidden="true" tabindex="-1"></a>          id        dob gender employ  income haspartner</span>
<span id="c1-4"><a href="#c1-4" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>      M      E <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="c1-5"><a href="#c1-5" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>      X      U      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c1-6"><a href="#c1-6" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>      F      E  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="c1-7"><a href="#c1-7" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>      M      E  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="c1-8"><a href="#c1-8" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>      F      E  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="c1-9"><a href="#c1-9" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>      F      E <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="c1-10"><a href="#c1-10" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c1-11"><a href="#c1-11" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>      M      E  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="c1-12"><a href="#c1-12" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c1-13"><a href="#c1-13" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>      F      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c1-14"><a href="#c1-14" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>      F      E <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="c1-15"><a href="#c1-15" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>      F      E <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="c1-16"><a href="#c1-16" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>      M      E  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="c1-17"><a href="#c1-17" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>      M      E <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="c1-18"><a href="#c1-18" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>      M      E <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="c1-19"><a href="#c1-19" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>      M      N      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c1-20"><a href="#c1-20" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>      M      E  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="c1-21"><a href="#c1-21" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>      F      E <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="c1-22"><a href="#c1-22" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>      F      E  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="c1-23"><a href="#c1-23" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span>      <span class="sc">-</span>      N      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>This is string column but it has an â€˜categoriesâ€™ property set which
points to a Data Resource in the Data Package. It is possible te get
this list of</p>
<p>categories</p>
<div class="sourceCode" id="c2"><pre class="sourceCode R"><code class="sourceCode r"><span id="c2-1"><a href="#c2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_categorieslist</span>(dta<span class="sc">$</span>employ)</span>
<span id="c2-2"><a href="#c2-2" aria-hidden="true" tabindex="-1"></a>  code                  label missing</span>
<span id="c2-3"><a href="#c2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>    E               Employed   <span class="cn">FALSE</span></span>
<span id="c2-4"><a href="#c2-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>    U             Unemployed   <span class="cn">FALSE</span></span>
<span id="c2-5"><a href="#c2-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>    N Non<span class="sc">-</span>working<span class="sc">-</span>population   <span class="cn">FALSE</span></span>
<span id="c2-6"><a href="#c2-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>    X                Unknown    <span class="cn">TRUE</span></span></code></pre></div>
<p>This list of categories can also be used to convert the field to
factor:</p>
<div class="sourceCode" id="c3"><pre class="sourceCode R"><code class="sourceCode r"><span id="c3-1"><a href="#c3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_to_factor</span>(dta<span class="sc">$</span>employ)</span>
<span id="c3-2"><a href="#c3-2" aria-hidden="true" tabindex="-1"></a> [<span class="dv">1</span>] Employed               Unemployed             Employed              </span>
<span id="c3-3"><a href="#c3-3" aria-hidden="true" tabindex="-1"></a> [<span class="dv">4</span>] Employed               Employed               Employed              </span>
<span id="c3-4"><a href="#c3-4" aria-hidden="true" tabindex="-1"></a> [<span class="dv">7</span>] Non<span class="sc">-</span>working<span class="sc">-</span>population Employed               Non<span class="sc">-</span>working<span class="sc">-</span>population</span>
<span id="c3-5"><a href="#c3-5" aria-hidden="true" tabindex="-1"></a>[<span class="dv">10</span>] Non<span class="sc">-</span>working<span class="sc">-</span>population Employed               Employed              </span>
<span id="c3-6"><a href="#c3-6" aria-hidden="true" tabindex="-1"></a>[<span class="dv">13</span>] Employed               Employed               Employed              </span>
<span id="c3-7"><a href="#c3-7" aria-hidden="true" tabindex="-1"></a>[<span class="dv">16</span>] Non<span class="sc">-</span>working<span class="sc">-</span>population Employed               Employed              </span>
<span id="c3-8"><a href="#c3-8" aria-hidden="true" tabindex="-1"></a>[<span class="dv">19</span>] Employed               Non<span class="sc">-</span>working<span class="sc">-</span>population</span>
<span id="c3-9"><a href="#c3-9" aria-hidden="true" tabindex="-1"></a><span class="fu">attr</span>(,<span class="st">&quot;fielddescriptor&quot;</span>)</span>
<span id="c3-10"><a href="#c3-10" aria-hidden="true" tabindex="-1"></a>Field Descriptor<span class="sc">:</span></span>
<span id="c3-11"><a href="#c3-11" aria-hidden="true" tabindex="-1"></a>name      <span class="sc">:</span><span class="st">&quot;employ&quot;</span></span>
<span id="c3-12"><a href="#c3-12" aria-hidden="true" tabindex="-1"></a>title     <span class="sc">:</span><span class="st">&quot;Employment status&quot;</span></span>
<span id="c3-13"><a href="#c3-13" aria-hidden="true" tabindex="-1"></a>type      <span class="sc">:</span><span class="st">&quot;string&quot;</span></span>
<span id="c3-14"><a href="#c3-14" aria-hidden="true" tabindex="-1"></a>categories<span class="sc">:</span>List of <span class="dv">1</span></span>
<span id="c3-15"><a href="#c3-15" aria-hidden="true" tabindex="-1"></a>Levels<span class="sc">:</span> Employed Unemployed Non<span class="sc">-</span>working<span class="sc">-</span>population Unknown</span></code></pre></div>
<p>Using the <code>convert_categories = &quot;to_factor&quot;</code> argument of
<code>dp_apply_schema()</code> (which is called by
<code>dp_get_data()</code>) it is also possible to convert all fields
which have an associated â€˜categoriesâ€™ field to factor:</p>
<div class="sourceCode" id="c4"><pre class="sourceCode R"><code class="sourceCode r"><span id="c4-1"><a href="#c4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;employment&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="c4-2"><a href="#c4-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">dp_get_data</span>(<span class="at">convert_categories =</span> <span class="st">&quot;to_factor&quot;</span>)</span>
<span id="c4-3"><a href="#c4-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="c4-4"><a href="#c4-4" aria-hidden="true" tabindex="-1"></a>          id        dob  gender                 employ  income haspartner</span>
<span id="c4-5"><a href="#c4-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span>    Male               Employed <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="c4-6"><a href="#c4-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span>   Other             Unemployed      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-7"><a href="#c4-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span>  Female               Employed  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="c4-8"><a href="#c4-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span>    Male               Employed  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="c4-9"><a href="#c4-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span>  Female               Employed  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="c4-10"><a href="#c4-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span>  Female               Employed <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="c4-11"><a href="#c4-11" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span>    Male Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-12"><a href="#c4-12" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span>    Male               Employed  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="c4-13"><a href="#c4-13" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span>  Female Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-14"><a href="#c4-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span>  Female Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-15"><a href="#c4-15" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span>  Female               Employed <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="c4-16"><a href="#c4-16" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span>  Female               Employed <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="c4-17"><a href="#c4-17" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span>    Male               Employed  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="c4-18"><a href="#c4-18" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span>    Male               Employed <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="c4-19"><a href="#c4-19" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span>    Male               Employed <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="c4-20"><a href="#c4-20" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span>    Male Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-21"><a href="#c4-21" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span>    Male               Employed  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="c4-22"><a href="#c4-22" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span>  Female               Employed <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="c4-23"><a href="#c4-23" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span>  Female               Employed  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="c4-24"><a href="#c4-24" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span> Unknown Non<span class="sc">-</span>working<span class="sc">-</span>population      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>When the <a href="https://cran.r-project.org/package=codelist"><code>codelist</code>
package</a> is installed, it is also possible to convert the column to a
<code>code</code> vector:</p>
<div class="sourceCode" id="c4"><pre class="sourceCode R"><code class="sourceCode r"><span id="c4-1"><a href="#c4-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta <span class="ot">&lt;-</span> <span class="fu">dp_resource</span>(dp, <span class="st">&quot;employment&quot;</span>) <span class="sc">|&gt;</span> </span>
<span id="c4-2"><a href="#c4-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="fu">dp_get_data</span>(<span class="at">convert_categories =</span> <span class="st">&quot;to_code&quot;</span>)</span>
<span id="c4-3"><a href="#c4-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta</span>
<span id="c4-4"><a href="#c4-4" aria-hidden="true" tabindex="-1"></a>          id        dob     gender      employ  income haspartner</span>
<span id="c4-5"><a href="#c4-5" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>  <span class="dv">368509515</span> <span class="dv">1993-06-14</span> M[Male]    E[Employed] <span class="fl">2691.80</span>      <span class="cn">FALSE</span></span>
<span id="c4-6"><a href="#c4-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>  <span class="dv">187844355</span> <span class="dv">1961-10-08</span> X[Other]   U[Unemploâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-7"><a href="#c4-7" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>  <span class="dv">273040044</span> <span class="dv">1982-06-17</span> F[Female]  E[Employed]  <span class="fl">533.65</span>      <span class="cn">FALSE</span></span>
<span id="c4-8"><a href="#c4-8" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>  <span class="dv">963831798</span> <span class="dv">1965-02-15</span> M[Male]    E[Employed]  <span class="fl">790.13</span>      <span class="cn">FALSE</span></span>
<span id="c4-9"><a href="#c4-9" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>  <span class="dv">854856378</span> <span class="dv">1990-01-30</span> F[Female]  E[Employed]  <span class="fl">716.79</span>       <span class="cn">TRUE</span></span>
<span id="c4-10"><a href="#c4-10" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>   <span class="dv">20072760</span> <span class="dv">1961-08-18</span> F[Female]  E[Employed] <span class="fl">1651.60</span>      <span class="cn">FALSE</span></span>
<span id="c4-11"><a href="#c4-11" aria-hidden="true" tabindex="-1"></a><span class="dv">7</span>  <span class="dv">429782078</span> <span class="dv">2019-09-23</span> M[Male]    N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-12"><a href="#c4-12" aria-hidden="true" tabindex="-1"></a><span class="dv">8</span>  <span class="dv">711292034</span> <span class="dv">1994-02-16</span> M[Male]    E[Employed]  <span class="fl">455.98</span>      <span class="cn">FALSE</span></span>
<span id="c4-13"><a href="#c4-13" aria-hidden="true" tabindex="-1"></a><span class="dv">9</span>  <span class="dv">949458305</span> <span class="dv">2005-06-16</span> F[Female]  N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-14"><a href="#c4-14" aria-hidden="true" tabindex="-1"></a><span class="dv">10</span> <span class="dv">911459071</span> <span class="dv">2007-02-27</span> F[Female]  N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-15"><a href="#c4-15" aria-hidden="true" tabindex="-1"></a><span class="dv">11</span> <span class="dv">921370403</span> <span class="dv">1981-09-14</span> F[Female]  E[Employed] <span class="fl">1461.36</span>      <span class="cn">FALSE</span></span>
<span id="c4-16"><a href="#c4-16" aria-hidden="true" tabindex="-1"></a><span class="dv">12</span>  <span class="dv">26901869</span> <span class="dv">1981-03-08</span> F[Female]  E[Employed] <span class="fl">1153.02</span>       <span class="cn">TRUE</span></span>
<span id="c4-17"><a href="#c4-17" aria-hidden="true" tabindex="-1"></a><span class="dv">13</span> <span class="dv">640668848</span> <span class="dv">1993-08-30</span> M[Male]    E[Employed]  <span class="fl">708.98</span>       <span class="cn">TRUE</span></span>
<span id="c4-18"><a href="#c4-18" aria-hidden="true" tabindex="-1"></a><span class="dv">14</span> <span class="dv">996464509</span> <span class="dv">1960-12-10</span> M[Male]    E[Employed] <span class="fl">1088.99</span>      <span class="cn">FALSE</span></span>
<span id="c4-19"><a href="#c4-19" aria-hidden="true" tabindex="-1"></a><span class="dv">15</span>  <span class="dv">58820512</span> <span class="dv">1962-10-13</span> M[Male]    E[Employed] <span class="fl">2243.10</span>      <span class="cn">FALSE</span></span>
<span id="c4-20"><a href="#c4-20" aria-hidden="true" tabindex="-1"></a><span class="dv">16</span> <span class="dv">288242988</span> <span class="dv">2013-06-11</span> M[Male]    N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="c4-21"><a href="#c4-21" aria-hidden="true" tabindex="-1"></a><span class="dv">17</span> <span class="dv">549758863</span> <span class="dv">1990-06-09</span> M[Male]    E[Employed]  <span class="fl">719.69</span>       <span class="cn">TRUE</span></span>
<span id="c4-22"><a href="#c4-22" aria-hidden="true" tabindex="-1"></a><span class="dv">18</span> <span class="dv">998045846</span> <span class="dv">1973-01-25</span> F[Female]  E[Employed] <span class="fl">1312.45</span>      <span class="cn">FALSE</span></span>
<span id="c4-23"><a href="#c4-23" aria-hidden="true" tabindex="-1"></a><span class="dv">19</span> <span class="dv">902078272</span> <span class="dv">1962-05-29</span> F[Female]  E[Employed]  <span class="fl">618.27</span>      <span class="cn">FALSE</span></span>
<span id="c4-24"><a href="#c4-24" aria-hidden="true" tabindex="-1"></a><span class="dv">20</span> <span class="dv">594477489</span> <span class="dv">1952-08-31</span> <span class="sc">-</span>[Unknown] N[Non<span class="sc">-</span>worâ€¦]      <span class="cn">NA</span>       <span class="cn">TRUE</span></span></code></pre></div>
<p>This has the advantage that both the values/codes and the labels are
kept together and it is possible to use both when coding which can make
code safer and more readable:</p>
<div class="sourceCode" id="codedemo"><pre class="sourceCode R"><code class="sourceCode r"><span id="codedemo-1"><a href="#codedemo-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">library</span>(codelist)</span>
<span id="codedemo-2"><a href="#codedemo-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta[dta<span class="sc">$</span>gender <span class="sc">==</span> <span class="st">&quot;X&quot;</span>, ]</span>
<span id="codedemo-3"><a href="#codedemo-3" aria-hidden="true" tabindex="-1"></a>         id        dob   gender      employ income haspartner</span>
<span id="codedemo-4"><a href="#codedemo-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">187844355</span> <span class="dv">1961-10-08</span> X[Other] U[Unemploâ€¦]     <span class="cn">NA</span>      <span class="cn">FALSE</span></span>
<span id="codedemo-5"><a href="#codedemo-5" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dta[dta<span class="sc">$</span>gender <span class="sc">==</span> <span class="fu">as.label</span>(<span class="st">&quot;Other&quot;</span>), ]</span>
<span id="codedemo-6"><a href="#codedemo-6" aria-hidden="true" tabindex="-1"></a>         id        dob   gender      employ income haspartner</span>
<span id="codedemo-7"><a href="#codedemo-7" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="dv">187844355</span> <span class="dv">1961-10-08</span> X[Other] U[Unemploâ€¦]     <span class="cn">NA</span>      <span class="cn">FALSE</span></span></code></pre></div>
<h2 id="creating-a-data-package">Creating a Data Package</h2>
<p>This is shown in a seperate vignette
<code>Creating a Data Package</code></p>
<h2 id="quickly-saving-to-and-reading-from-a-data-package">Quickly
saving to and reading from a Data Package</h2>
<p>A quick way to create a Data Package from a given dataset is with the
<code>dp_save_as_datapackage()</code> function:</p>
<div class="sourceCode" id="q1"><pre class="sourceCode R"><code class="sourceCode r"><span id="q1-1"><a href="#q1-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> dir <span class="ot">&lt;-</span> <span class="fu">tempfile</span>()</span>
<span id="q1-2"><a href="#q1-2" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">data</span>(iris)</span>
<span id="q1-3"><a href="#q1-3" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_save_as_datapackage</span>(iris, dir)</span></code></pre></div>
<p>And for reading:</p>
<div class="sourceCode" id="q2"><pre class="sourceCode R"><code class="sourceCode r"><span id="q2-1"><a href="#q2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_load_from_datapackage</span>(dir) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span>
<span id="q2-2"><a href="#q2-2" aria-hidden="true" tabindex="-1"></a>  Sepal.Length Sepal.Width Petal.Length Petal.Width Species</span>
<span id="q2-3"><a href="#q2-3" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>       <span class="dv">1</span></span>
<span id="q2-4"><a href="#q2-4" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span>          <span class="fl">4.9</span>         <span class="fl">3.0</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>       <span class="dv">1</span></span>
<span id="q2-5"><a href="#q2-5" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span>       <span class="dv">1</span></span>
<span id="q2-6"><a href="#q2-6" aria-hidden="true" tabindex="-1"></a><span class="dv">4</span>          <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span>       <span class="dv">1</span></span>
<span id="q2-7"><a href="#q2-7" aria-hidden="true" tabindex="-1"></a><span class="dv">5</span>          <span class="fl">5.0</span>         <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>       <span class="dv">1</span></span>
<span id="q2-8"><a href="#q2-8" aria-hidden="true" tabindex="-1"></a><span class="dv">6</span>          <span class="fl">5.4</span>         <span class="fl">3.9</span>          <span class="fl">1.7</span>         <span class="fl">0.4</span>       <span class="dv">1</span></span></code></pre></div>
<p>This will either load the Data Resource with the same name as the
Data Package or the first resource in the Data Package. It is also
possible to specify the name of the Data Resource that should be read.
Additional arguments are passed on to <code>dp_get_data())</code>:</p>
<div class="sourceCode" id="q2"><pre class="sourceCode R"><code class="sourceCode r"><span id="q2-1"><a href="#q2-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&gt;</span> <span class="fu">dp_load_from_datapackage</span>(dir, <span class="st">&quot;iris&quot;</span>, <span class="at">convert_categories =</span> <span class="st">&quot;to_factor&quot;</span>, </span>
<span id="q2-2"><a href="#q2-2" aria-hidden="true" tabindex="-1"></a><span class="sc">+</span>   <span class="at">use_fread =</span> <span class="cn">TRUE</span>)</span>
<span id="q2-3"><a href="#q2-3" aria-hidden="true" tabindex="-1"></a>Loading required namespace<span class="sc">:</span> data.table</span>
<span id="q2-4"><a href="#q2-4" aria-hidden="true" tabindex="-1"></a> </span>
<span id="q2-5"><a href="#q2-5" aria-hidden="true" tabindex="-1"></a>     Sepal.Length Sepal.Width Petal.Length Petal.Width   Species</span>
<span id="q2-6"><a href="#q2-6" aria-hidden="true" tabindex="-1"></a>            <span class="sc">&lt;</span>num<span class="sc">&gt;</span>       <span class="er">&lt;</span>num<span class="sc">&gt;</span>        <span class="er">&lt;</span>num<span class="sc">&gt;</span>       <span class="er">&lt;</span>num<span class="sc">&gt;</span>    <span class="er">&lt;</span>fctr<span class="sc">&gt;</span></span>
<span id="q2-7"><a href="#q2-7" aria-hidden="true" tabindex="-1"></a>  <span class="dv">1</span><span class="sc">:</span>          <span class="fl">5.1</span>         <span class="fl">3.5</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>    setosa</span>
<span id="q2-8"><a href="#q2-8" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span><span class="sc">:</span>          <span class="fl">4.9</span>         <span class="fl">3.0</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>    setosa</span>
<span id="q2-9"><a href="#q2-9" aria-hidden="true" tabindex="-1"></a>  <span class="dv">3</span><span class="sc">:</span>          <span class="fl">4.7</span>         <span class="fl">3.2</span>          <span class="fl">1.3</span>         <span class="fl">0.2</span>    setosa</span>
<span id="q2-10"><a href="#q2-10" aria-hidden="true" tabindex="-1"></a>  <span class="dv">4</span><span class="sc">:</span>          <span class="fl">4.6</span>         <span class="fl">3.1</span>          <span class="fl">1.5</span>         <span class="fl">0.2</span>    setosa</span>
<span id="q2-11"><a href="#q2-11" aria-hidden="true" tabindex="-1"></a>  <span class="dv">5</span><span class="sc">:</span>          <span class="fl">5.0</span>         <span class="fl">3.6</span>          <span class="fl">1.4</span>         <span class="fl">0.2</span>    setosa</span>
<span id="q2-12"><a href="#q2-12" aria-hidden="true" tabindex="-1"></a> <span class="sc">---</span>                                                            </span>
<span id="q2-13"><a href="#q2-13" aria-hidden="true" tabindex="-1"></a><span class="dv">146</span><span class="sc">:</span>          <span class="fl">6.7</span>         <span class="fl">3.0</span>          <span class="fl">5.2</span>         <span class="fl">2.3</span> virginica</span>
<span id="q2-14"><a href="#q2-14" aria-hidden="true" tabindex="-1"></a><span class="dv">147</span><span class="sc">:</span>          <span class="fl">6.3</span>         <span class="fl">2.5</span>          <span class="fl">5.0</span>         <span class="fl">1.9</span> virginica</span>
<span id="q2-15"><a href="#q2-15" aria-hidden="true" tabindex="-1"></a><span class="dv">148</span><span class="sc">:</span>          <span class="fl">6.5</span>         <span class="fl">3.0</span>          <span class="fl">5.2</span>         <span class="fl">2.0</span> virginica</span>
<span id="q2-16"><a href="#q2-16" aria-hidden="true" tabindex="-1"></a><span class="dv">149</span><span class="sc">:</span>          <span class="fl">6.2</span>         <span class="fl">3.4</span>          <span class="fl">5.4</span>         <span class="fl">2.3</span> virginica</span>
<span id="q2-17"><a href="#q2-17" aria-hidden="true" tabindex="-1"></a><span class="dv">150</span><span class="sc">:</span>          <span class="fl">5.9</span>         <span class="fl">3.0</span>          <span class="fl">5.1</span>         <span class="fl">1.8</span> virginica</span></code></pre></div>
</body>
</html>
